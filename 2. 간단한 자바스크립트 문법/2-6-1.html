<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Shallow vs Deep Copy Explained</title>
</head>
<body>
<h2>Console(콘솔)에서 결과 확인!</h2>
<button onclick="runExample()">실행</button>
<script>
    function runExample() {

        // 얕은 복사 vs 깊은 복사

        // 간단하게 설명하면 얕은복사는 주소(참조)값이 복사되므로 객체/배열 내부를 변경하면 원본도 같이 변경

        // - name: 문자열(값 타입, Primitive) → 값 자체가 복사됨. (number / string)
        // - nums: 배열(참조 타입, Reference) → 주소(참조)만 복사됨. (내부를 바꾸면 둘 다 영향)

        const original = { name: "Alex", nums: [1, 2, 3] };

        // 1. 얕은 복사 - spread 문법
        const shallow1 = { ...original };
        // 2. 얕은 복사 - Object.assign
        const shallow2 = Object.assign({}, original);

        // name을 변경해도 original.name에는 영향 없음 (값 타입이기 때문)
        shallow1.name = "Bella";
        // nums 배열의 내부를 변경하면, original과 shallow1/shallow2 모두 영향 (같은 배열을 공유)
        shallow1.nums[0] = 99;

        console.log("[얕은 복사] spread 문법:");
        console.log("original :", original); // name: "Alex", nums: [99, 2, 3]
        console.log("shallow1 :", shallow1); // name: "Bella", nums: [99, 2, 3]
        console.log("------");

        // shallow2도 마찬가지로 같은 배열을 공유
        shallow2.nums[1] = 888;
        console.log("[얕은 복사] Object.assign:");
        console.log("original :", original); // nums: [99, 888, 3]
        console.log("shallow2 :", shallow2); // nums: [99, 888, 3]
        console.log("------");

        // // 3. 깊은 복사
        const deep = JSON.parse(JSON.stringify(original));
        deep.name = "Chris";           // deep.name만 바뀜 (original 영향 X)
        deep.nums[2] = 555;            // deep.nums[2]만 바뀜 (original 영향 X)

        console.log("[깊은 복사] 방식:");
        console.log("original :", original); // name: "Alex", nums: [99, 888, 3]
        console.log("deep     :", deep);     // name: "Chris", nums: [99, 888, 555]

    }
</script>
</body>
</html>
